# 技術構成の共通方針（コーディングルール）

- **コーディング規約:** WordPress Coding Standards ( https://github.com/WordPress/wpcs-docs/blob/master/wordpress-coding-standards.md ) に準拠します。可能な限り `phpcs`（WordPress ルールセット）でチェックを行ってください。
  * PHPの関数やメソッドには、どんな処理をしているか／どんな引数があるか／どんな値を返すかが分かるように、PHPDocを必ず記載してください。
  * プログラム全般として、各処理がどんな事をしているのかが分かるように、コメントを日本語で細かく併記してください。
  * テストファイルなども同様にコメントを記載してください。
  * WordPress標準のスキルにはPHPDocやコメントは英語で記載するように指定があるかもしれませんが、**このプロジェクトでは日本語で記載する事を優先してください**。
- **国際化:** 画面に表示される文字列は翻訳関数（`__`, `_x` など）でラップし、テキストドメインを指定します。
  * 翻訳関数に入れる文章は１文毎で区切ってください。つまり一つの翻訳関数の中に複数の文を入れないでください。
- **セキュリティ:** 入力値のサニタイズ、出力値のエスケープ、適切な権限チェックを必ず行います。
- **ファイル構成:** 機能単位でディレクトリを分け、プラグインファイル直下にロジックを追加しないようにします。
- **テスト容易性:** 単体テストを記述しやすいように、状態を最小限に抑えた純粋な関数／メソッド、依存性の注入、外部サービスとの分離を意識して実装します。テスト対象の抽象化やインターフェース化が必要な場合は積極的に行ってください。
- **テスト:** 可能な範囲で自動チェック（PHPCS 等）を活用し、PR では手動テストの内容や確認観点を記載します。PHPUnit は `composer install` の後に `npm run phpunit` を実行してください。
- **CSS/デザイン**
  - 変数とユーティリティを活用し、テーマや見た目の一貫性を担保する。
  - コンポーネント単位で責務を分け、影響範囲が分かる構成にする。
  - 共通のコンポーネントや変数を極力使用し、独自のクラス名に対するCSSは極力増やさない
